import{r as V,c as k,a as w,o as u,b as m,d as o,e as f,w as x,F as B,f as H,S as A,t as p,u as I,n as D,g as z,M as K,h as g,v as b,i as F,j as W,k as Y,p as O,l as N,m as G,q as X,s as J,x as Q,y as Z,z as ee,A as te}from"./vendor.33337ddb.js";const oe=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const c of r)if(c.type==="childList")for(const s of c.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&n(s)}).observe(document,{childList:!0,subtree:!0});function t(r){const c={};return r.integrity&&(c.integrity=r.integrity),r.referrerpolicy&&(c.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?c.credentials="include":r.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function n(r){if(r.ep)return;r.ep=!0;const c=t(r);fetch(r.href,c)}};oe();const i=V({user:{},account:{},events:[],activeEvent:{},attendees:[],comments:[],myEvents:[]});var h=(a,e)=>{for(const[t,n]of e)a[t]=n;return a};const ne={name:"App",setup(){return{appState:k(()=>i)}}},ae=o("footer",{class:"mt-3"},[o("div",{class:"bg-dark text-light text-center p-4"}," Made with \u2764\uFE0F by Kyle E. ")],-1);function se(a,e,t,n,r,c){const s=w("Navbar"),v=w("router-view"),S=w("EventForm"),U=w("Modal");return u(),m(B,null,[o("header",null,[f(s)]),o("main",null,[f(v)]),ae,f(U,{id:"eventModal"},{"modal-title":x(()=>[]),"modal-body":x(()=>[f(S)]),_:1})],64)}var re=h(ne,[["render",se]]);const q=window.location.origin.includes("localhost"),P=q?"http://localhost:3000":"",ce="dev-hgqjrro9.us.auth0.com",ie="JrqqXscucubFtUlHT7GxKeNrn0rvmBXv",le="https://gregslist.com";function C(a,e){if(q)console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(a){case"log":case"assert":return}console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const _={log(){C("log",arguments)},error(){C("error",arguments)},warn(){C("warn",arguments)},assert(){C("assert",arguments)},trace(){C("trace",arguments)}},d=H.create({baseURL:P,timeout:8e3});class de{async getCommentsByEventId(e){const t=await d.get(`api/events/${e}/comments`);i.comments=t.data}async createComment(e){const t=await d.post("api/comments",e);i.comments.push(t.data)}async removeComment(e){await d.delete(`api/comments/${e}`),i.comments=i.comments.filter(t=>t.id!==e)}}const ue=new de;class y{static async confirm(e="Are you sure?",t="You won't be able to revert this!",n="warning",r="Yes, delete it!"){try{return!!(await A.fire({title:e,text:t,icon:n,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",t="warning",n="top-end",r=3e3,c=!0){A.fire({title:e,icon:t,position:n,timer:r,timerProgressBar:c,toast:!0,showConfirmButton:!1})}}const me={props:{comment:{type:Object,required:!0}},setup(a){return{async removeComment(){try{await y.confirm()&&await ue.removeComment(a.comment.id),y.toast("Comment removed","success")}catch(e){y.toast(e.message,"error"),_.log(e)}}}}},_e={class:"mb-3"},ve={class:"card"},pe={class:"card-body d-flex"},ge={class:"me-3"},he=["src"],fe={class:"d-flex justify-content-between"},be={class:"card-title"};function ye(a,e,t,n,r,c){return u(),m("div",_e,[o("div",ve,[o("div",pe,[o("div",ge,[o("img",{class:"userImg",src:t.comment.creator.picture,alt:"user.picture"},null,8,he)]),o("div",null,[o("div",fe,[o("h5",be,p(t.comment.creator.name),1),o("i",{onClick:e[0]||(e[0]=s=>n.removeComment()),class:"mdi mdi-delete"})]),o("p",null,p(t.comment.body),1)])])])])}var Ee=h(me,[["render",ye],["__scopeId","data-v-3785c2c2"]]),we=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ee});const Ce={props:{event:{type:Object,required:!0}},setup(a){const e=I();return{goToEvent(){e.push({name:"Event",params:{id:a.event.id}})},router:e}}},xe={class:"col-md-3 col-sm-6 mt-3"},Se=["title"],$e=["src"],Te={class:"card-img-overlay"},ke={class:"card-title"};function Ae(a,e,t,n,r,c){return u(),m("div",xe,[o("div",{class:D(["card bg-dark text-white",{selectable:!t.event.isCanceled}]),title:t.event.name,onClick:e[0]||(e[0]=s=>n.goToEvent())},[o("img",{src:t.event.coverImg,class:D(["card-img cardSize",{canceled:t.event.isCanceled}]),alt:"..."},null,10,$e),o("div",Te,[o("h4",ke,p(t.event.name),1),o("h6",null,p(new Date(t.event.startDate).toLocaleString()),1),o("h6",null,p(t.event.location),1),o("h6",null,p(t.event.capacity)+" seats available",1)])],10,Se)])}var Ie=h(Ce,[["render",Ae],["__scopeId","data-v-6fabec1f"]]),De=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ie});class Oe{async getAllEvents(e=""){const t=await d.get("api/events"+e);i.events=t.data}async getEventById(e){const t=await d.get("api/events/"+e);i.activeEvent=t.data}async createEvent(e){const t=await d.post("api/events",e);i.events.push(t.data),i.activeEvent=t.data}async cancelEvent(){await d.delete("api/events/"+i.activeEvent.id)}}const Ne=new Oe,qe={setup(){const a=I(),e=z({name:"",description:"",location:"",startDate:"",capacity:"",coverImg:"",type:""});return{editable:e,async handleEvent(){try{await Ne.createEvent(e.value),K.getOrCreateInstance(document.getElementById("eventModal")).hide(),e.value={},y.toast("Event created!"),a.push({name:"Event",params:{id:i.activeEvent.id}})}catch(t){y.toast(t.message,"error"),_.log(t)}}}}},Pe={class:"form-group"},Me=o("label",{for:"eventName"},"Event Name",-1),Le={class:"form-group mt-3"},je=o("label",{for:"eventDescription"},"Event Description",-1),Re={class:"form-group mt-3"},Ue=o("label",{for:"eventLocation"},"Event Location",-1),Ve={class:"form-group mt-3"},Be=o("label",{for:"eventDate"},"Event Date",-1),He={class:"form-group mt-3"},ze=o("label",{for:"eventCapacity"},"Event Capacity",-1),Ke={class:"form-group mt-3"},Fe=o("label",{for:"eventImage"},"Event Image",-1),We={class:"form-group mt-3"},Ye=o("label",{for:"eventType"},"Event Type",-1),Ge=Y('<option selected value="">Select an event type</option><option value="concert">Concert</option><option value="convention">Convention</option><option value="digital">Digital Event</option><option value="sport">Sporting Event</option>',5),Xe=[Ge],Je=o("div",{class:"mt-3 d-flex justify-content-between"},[o("button",{type:"submit",class:"btn btn-success"},"Submit"),o("button",{type:"button",class:"btn btn-outline-danger","data-bs-dismiss":"modal"},"Cancel")],-1);function Qe(a,e,t,n,r,c){return u(),m("form",{onSubmit:e[7]||(e[7]=W(s=>n.handleEvent(),["prevent"]))},[o("div",Pe,[Me,g(o("input",{required:"",type:"text",class:"form-control",id:"eventName",placeholder:"Event Name","onUpdate:modelValue":e[0]||(e[0]=s=>n.editable.name=s)},null,512),[[b,n.editable.name]])]),o("div",Le,[je,g(o("textarea",{class:"form-control",id:"eventDescription",rows:"3",placeholder:"Event Description","onUpdate:modelValue":e[1]||(e[1]=s=>n.editable.description=s)},null,512),[[b,n.editable.description]])]),o("div",Re,[Ue,g(o("input",{required:"",type:"text",class:"form-control",id:"eventLocation",placeholder:"Event Location","onUpdate:modelValue":e[2]||(e[2]=s=>n.editable.location=s)},null,512),[[b,n.editable.location]])]),o("div",Ve,[Be,g(o("input",{required:"",type:"date",class:"form-control",id:"eventDate","onUpdate:modelValue":e[3]||(e[3]=s=>n.editable.startDate=s)},null,512),[[b,n.editable.startDate]])]),o("div",He,[ze,g(o("input",{required:"",type:"number",class:"form-control",id:"eventCapacity",placeholder:"Event Capacity","onUpdate:modelValue":e[4]||(e[4]=s=>n.editable.capacity=s)},null,512),[[b,n.editable.capacity]])]),o("div",Ke,[Fe,g(o("input",{required:"",type:"text",class:"form-control",id:"eventImage",placeholder:"Event Image","onUpdate:modelValue":e[5]||(e[5]=s=>n.editable.coverImg=s)},null,512),[[b,n.editable.coverImg]])]),o("div",We,[Ye,g(o("select",{required:"",name:"type",class:"form-control",id:"eventType","onUpdate:modelValue":e[6]||(e[6]=s=>n.editable.type=s)},Xe,512),[[F,n.editable.type]])]),Je],32)}var Ze=h(qe,[["render",Qe]]),et=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ze});const tt={setup(){return{}}},ot=a=>(O("data-v-c3d5e6be"),a=a(),N(),a),nt={class:"col-md-12 mt-3"},at=ot(()=>o("div",{class:"card w-100 h-auto bg-dark"},[o("div",{class:"card-body coverImg d-flex flex-column justify-content-end"},[o("h5",{class:"card-title fs-2"},"Welcome to Tower Events!"),o("p",{class:"card-text"},"Get your tickets before anyone else!")])],-1)),st=[at];function rt(a,e,t,n,r,c){return u(),m("div",nt,st)}var ct=h(tt,[["render",rt],["__scopeId","data-v-c3d5e6be"]]),it=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ct});const lt={},dt={class:"modal fade",tabindex:"-1"},ut={class:"modal-dialog modal-lg"},mt={class:"modal-content bg-dark"},_t={class:"modal-body"};function vt(a,e){return u(),m("div",dt,[o("div",ut,[o("div",mt,[o("div",_t,[G(a.$slots,"modal-body")])])])])}var pt=h(lt,[["render",vt]]),gt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:pt});const ht="modulepreload",M={},ft="/",$=function(e,t){return!t||t.length===0?e():Promise.all(t.map(n=>{if(n=`${ft}${n}`,n in M)return;M[n]=!0;const r=n.endsWith(".css"),c=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${n}"]${c}`))return;const s=document.createElement("link");if(s.rel=r?"stylesheet":ht,r||(s.as="script",s.crossOrigin=""),s.href=n,document.head.appendChild(s),r)return new Promise((v,S)=>{s.addEventListener("load",v),s.addEventListener("error",S)})})).then(()=>e())};function bt(a){switch(a){case"./pages/AccountPage.vue":return $(()=>import("./AccountPage.d69c99b1.js"),["assets/AccountPage.d69c99b1.js","assets/AccountPage.f58d6fa9.css","assets/vendor.33337ddb.js","assets/AttendeesService.05c574f8.js"]);case"./pages/EventsPage.vue":return $(()=>import("./EventsPage.cd3ebdab.js"),["assets/EventsPage.cd3ebdab.js","assets/EventsPage.cf4324d1.css","assets/vendor.33337ddb.js","assets/AttendeesService.05c574f8.js"]);case"./pages/HomePage.vue":return $(()=>import("./HomePage.19464d17.js"),["assets/HomePage.19464d17.js","assets/HomePage.9d2d7da6.css","assets/vendor.33337ddb.js"]);default:return new Promise(function(e,t){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(t.bind(null,new Error("Unknown variable dynamic import: "+a)))})}}function T(a){return()=>bt(`./pages/${a}.vue`)}const yt=[{path:"/",name:"Home",component:T("HomePage")},{path:"/events/:id/",name:"Event",component:T("EventsPage")},{path:"/account",name:"Account",component:T("AccountPage"),beforeEnter:Q}],L=X({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:J(),routes:yt});class Et{async getAccount(){try{const e=await d.get("/account");i.account=e.data}catch(e){_.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}async getAllMyEvents(){const e=await d.get("account/attendees");_.log(e.data),i.myEvents=e.data}}const wt=new Et,Ct={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class xt{constructor(e=!1,t=P){}on(e,t){var n;return(n=this.socket)==null||n.on(e,t.bind(this)),this}onConnected(e){_.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){_.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var t;(t=this.socket)==null||t.emit(Ct.authenticate,e)}onError(e){_.error("[SOCKET_ERROR]",e)}enqueue(e,t){_.log("[ENQUEING_ACTION]",{action:e,payload:t}),this.queue.push({action:e,payload:t})}playback(){_.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(t=>{this.emit(t.action,t.payload)})}emit(e,t=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,t);if(!this.connected)return this.enqueue(e,t);this.socket.emit(e,t)}}class St extends xt{constructor(){super();this.on("error",this.onError)}onError(e){y.toast(e.message,"error")}}const j=new St,l=Z({domain:ce,clientId:ie,audience:le,useRefreshTokens:!0,onRedirectCallback:a=>{L.push(a&&a.targetUrl?a.targetUrl:window.location.pathname)}});l.on(l.AUTH_EVENTS.AUTHENTICATED,async function(){d.defaults.headers.authorization=l.bearer,d.interceptors.request.use($t),i.user=l.user,await wt.getAccount(),j.authenticate(l.bearer)});async function $t(a){if(!l.isAuthenticated)return a;const e=l.identity.exp*1e3,t=e<Date.now(),n=e<Date.now()+1e3*60*60*12;return t?await l.loginWithPopup():n&&(await l.getTokenSilently(),d.defaults.headers.authorization=l.bearer,j.authenticate(l.bearer)),a}const Tt={setup(){return{user:k(()=>i.user),async login(){l.loginWithPopup()},async logout(){l.logout({returnTo:window.location.origin})}}}},E=a=>(O("data-v-fa2b5426"),a=a(),N(),a),kt={class:"navbar navbar-expand-lg navbar-dark bg-dark px-3"},At=E(()=>o("div",{class:"d-flex flex-column align-items-center mx-2 fs-2"}," Tower Events ",-1)),It=E(()=>o("button",{class:"navbar-toggler",type:"button","data-bs-toggle":"collapse","data-bs-target":"#navbarText","aria-controls":"navbarText","aria-expanded":"false","aria-label":"Toggle navigation"},[o("span",{class:"navbar-toggler-icon"})],-1)),Dt={class:"collapse navbar-collapse",id:"navbarText",title:"Click to expand"},Ot=E(()=>o("ul",{class:"navbar-nav me-auto"},null,-1)),Nt={class:"navbar-text"},qt={key:1,class:"dropdown my-2 my-lg-0"},Pt={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown","aria-expanded":"false",id:"authDropdown"},Mt=["src"],Lt={class:"mx-3 text-success lighten-30"},jt={class:"dropdown-menu p-0 list-group w-100","aria-labelledby":"authDropdown"},Rt=E(()=>o("div",{class:"list-group-item list-group-item-action hoverable","data-bs-toggle":"modal","data-bs-target":"#eventModal"}," Create Event ",-1)),Ut=E(()=>o("div",{class:"list-group-item list-group-item-action hoverable"}," Manage Account ",-1)),Vt=E(()=>o("i",{class:"mdi mdi-logout"},null,-1)),Bt=ee(" Logout "),Ht=[Vt,Bt];function zt(a,e,t,n,r,c){const s=w("router-link");return u(),m("nav",kt,[f(s,{class:"navbar-brand d-flex",to:{name:"Home"}},{default:x(()=>[At]),_:1}),It,o("div",Dt,[Ot,o("span",Nt,[n.user.isAuthenticated?(u(),m("div",qt,[o("div",Pt,[o("img",{src:n.user.picture,alt:"user photo",height:"40",class:"rounded"},null,8,Mt),o("span",Lt,p(n.user.name),1)]),o("div",jt,[Rt,f(s,{to:{name:"Account"}},{default:x(()=>[Ut]),_:1}),o("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[1]||(e[1]=(...v)=>n.logout&&n.logout(...v))},Ht)])])):(u(),m("button",{key:0,class:"btn selectable text-success lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...v)=>n.login&&n.login(...v))}," Login "))])])])}var Kt=h(Tt,[["render",zt],["__scopeId","data-v-fa2b5426"]]),Ft=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Kt});function Wt(a){Object.entries({"./components/CommentCard.vue":we,"./components/EventCard.vue":De,"./components/EventForm.vue":et,"./components/HomeBanner.vue":it,"./components/Modal.vue":gt,"./components/Navbar.vue":Ft}).forEach(([t,n])=>{const r=n.name||t.substr(t.lastIndexOf("/")+1).replace(/\.\w+$/,"");a.component(r,n.default)})}const R=te(re);Wt(R);R.use(L).mount("#app");export{i as A,y as P,h as _,wt as a,d as b,ue as c,Ne as e,_ as l,L as r};
